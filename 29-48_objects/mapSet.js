"use strict"

/*
Map

new Map() ‚Äì —Å–æ–∑–¥–∞—ë—Ç –∫–æ–ª–ª–µ–∫—Ü–∏—é.
map.set(key, value) ‚Äì –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –ø–æ –∫–ª—é—á—É key
                      –∑–Ω–∞—á–µ–Ω–∏–µ value.
map.get(key) ‚Äì –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ
               –∫–ª—é—á—É –∏–ª–∏ undefined, –µ—Å–ª–∏ –∫–ª—é—á
               key –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç.
map.has(key) ‚Äì –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç true, –µ—Å–ª–∏ –∫–ª—é—á key
               –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏, –∏–Ω–∞—á–µ false.
map.delete(key) ‚Äì —É–¥–∞–ª—è–µ—Ç —ç–ª–µ–º–µ–Ω—Ç (–ø–∞—Ä—É ¬´–∫–ª—é—á/–∑–Ω–∞—á–µ–Ω–∏–µ¬ª)
                  –ø–æ –∫–ª—é—á—É key.
map.clear() ‚Äì –æ—á–∏—â–∞–µ—Ç –∫–æ–ª–ª–µ–∫—Ü–∏—é –æ—Ç –≤—Å–µ—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤.
map.size ‚Äì –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–µ–∫—É—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤.

 */
{
    let map = new Map();

    map.set("1", "str1");    // —Å—Ç—Ä–æ–∫–∞ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∫–ª—é—á–∞
    map.set(1, "num1");      // —Ü–∏—Ñ—Ä–∞ –∫–∞–∫ –∫–ª—é—á
    map.set(true, "bool1");  // –±—É–ª–µ–≤–æ –∑–Ω–∞—á–µ–Ω–∏–µ –∫–∞–∫ –∫–ª—é—á

// –ø–æ–º–Ω–∏—Ç–µ, –æ–±—ã—á–Ω—ã–π –æ–±—ä–µ–∫—Ç Object –ø—Ä–∏–≤–æ–¥–∏—Ç –∫–ª—é—á–∏ –∫ —Å—Ç—Ä–æ–∫–∞–º?
// Map —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ç–∏–ø –∫–ª—é—á–µ–π, —Ç–∞–∫ —á—Ç–æ –≤ —ç—Ç–æ–º —Å–ª—É—á–∞–µ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—Å—è 2 —Ä–∞–∑–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏—è:
    console.log(map.get(1)); // "num1"
    console.log(map.get("1")); // "str1"

    console.log(map.size); // 3
}

/*
map[key] —ç—Ç–æ –Ω–µ —Å–æ–≤—Å–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
 —Å–ø–æ—Å–æ–± –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è Map
–•–æ—Ç—è map[key] —Ç–∞–∫–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–∞–ø—Ä–∏–º–µ—Ä, –º—ã –º–æ–∂–µ–º
—É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å map[key] = 2, –≤ —ç—Ç–æ–º —Å–ª—É—á–∞–µ map —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–ª—Å—è
–±—ã –∫–∞–∫ –æ–±—ã—á–Ω—ã–π JavaScript –æ–±—ä–µ–∫—Ç, —Ç–∞–∫–∏–º
–æ–±—Ä–∞–∑–æ–º —ç—Ç–æ –≤–µ–¥—ë—Ç –∫–æ –≤—Å–µ–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º
 –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º (—Ç–æ–ª—å–∫–æ —Å—Ç—Ä–æ–∫–∏/—Å–∏–º–≤–æ–ª—å–Ω—ã–µ –∫–ª—é—á–∏
  –∏ —Ç–∞–∫ –¥–∞–ª–µ–µ).

–ü–æ—ç—Ç–æ–º—É –Ω–∞–º —Å–ª–µ–¥—É–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥—ã map: set,
 get –∏ —Ç–∞–∫ –¥–∞–ª–µ–µ.
 */

{
    let john = { name: "John" };

// –¥–∞–≤–∞–π—Ç–µ —Å–æ—Ö—Ä–∞–Ω–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Å–µ—â–µ–Ω–∏–π –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    let visitsCountMap = new Map();

// –æ–±—ä–µ–∫—Ç john - —ç—Ç–æ –∫–ª—é—á –¥–ª—è –∑–Ω–∞—á–µ–Ω–∏—è –≤ –æ–±—ä–µ–∫—Ç–µ Map
    visitsCountMap.set(john, 123);

    console.log(visitsCountMap.get(john)); // 123

    /*
    let john = { name: "John" };
let ben = { name: "Ben" };

let visitsCountObj = {}; // –ø–æ–ø—Ä–æ–±—É–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±—ä–µ–∫—Ç

visitsCountObj[ben] = 234; // –ø—Ä–æ–±—É–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±—ä–µ–∫—Ç ben –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∫–ª—é—á–∞
visitsCountObj[john] = 123; // –ø—Ä–æ–±—É–π–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±—ä–µ–∫—Ç john –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∫–ª—é—á–∞, –ø—Ä–∏ —ç—Ç–æ–º –æ–±—ä–µ–∫—Ç ben –±—É–¥–µ—Ç –∑–∞–º–µ—â—ë–Ω

// –í–æ—Ç —á—Ç–æ —Ç–∞–º –±—ã–ª–æ –∑–∞–ø–∏—Å–∞–Ω–æ!
alert( visitsCountObj["[object Object]"] ); // 123

–¢–∞–∫ –∫–∞–∫ visitsCountObj —è–≤–ª—è–µ—Ç—Å—è –æ–±—ä–µ–∫—Ç–æ–º, –æ–Ω –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç
–≤—Å–µ –∫–ª—é—á–∏ Object, —Ç–∞–∫–∏–µ –∫–∞–∫ john –∏ ben, –≤ –æ–¥–Ω—É –∏ —Ç—É –∂–µ
—Å—Ç—Ä–æ–∫—É "[object Object]". –≠—Ç–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ –Ω–µ —Ç–æ, —á–µ–≥–æ –º—ã —Ö–æ—Ç–∏–º.

     */


}

/*
–ö–∞–∫ –æ–±—ä–µ–∫—Ç Map —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç –∫–ª—é—á–∏
–ß—Ç–æ–±—ã —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å –∫–ª—é—á–∏, –æ–±—ä–µ–∫—Ç Map
 –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∞–ª–≥–æ—Ä–∏—Ç–º SameValueZero. –≠—Ç–æ –ø–æ—á—Ç–∏
 —Ç–∞–∫–æ–µ –∂–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ, —á—Ç–æ –∏ ===, —Å —Ç–æ–π
 –ª–∏—à—å —Ä–∞–∑–Ω–∏—Ü–µ–π, —á—Ç–æ NaN —Å—á–∏—Ç–∞–µ—Ç—Å—è —Ä–∞–≤–Ω—ã–º NaN. –¢–∞–∫
 —á—Ç–æ NaN —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∫–ª—é—á–∞.

–≠—Ç–æ—Ç –∞–ª–≥–æ—Ä–∏—Ç–º –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞–º–µ–Ω—ë–Ω –∏–ª–∏ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω.
 */


/*
map –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ü–µ–ø–æ—á–∫—É –≤—ã–∑–æ–≤–æ–≤
map.set("1", "str1")
  .set(1, "num1")
  .set(true, "bool1");

 */
//–ø–µ—Ä–µ–±–æ—Ä map
{
    let recipeMap = new Map([
        ["–æ–≥—É—Ä–µ—Ü", 500],
        ["–ø–æ–º–∏–¥–æ—Ä", 350],
        ["–ª—É–∫",    50]
    ]);
console.log("for  cycle in map")
// –ø–µ—Ä–µ–±–æ—Ä –ø–æ –∫–ª—é—á–∞–º (–æ–≤–æ—â–∏)
    for (let vegetable of recipeMap.keys()) {
        console.log(vegetable); // –æ–≥—É—Ä–µ—Ü, –ø–æ–º–∏–¥–æ—Ä, –ª—É–∫
    }

// –ø–µ—Ä–µ–±–æ—Ä –ø–æ –∑–Ω–∞—á–µ–Ω–∏—è–º (—á–∏—Å–ª–∞)
    for (let amount of recipeMap.values()) {
        console.log(amount); // 500, 350, 50
    }

// –ø–µ—Ä–µ–±–æ—Ä –ø–æ —ç–ª–µ–º–µ–Ω—Ç–∞–º –≤ —Ñ–æ—Ä–º–∞—Ç–µ [–∫–ª—é—á, –∑–Ω–∞—á–µ–Ω–∏–µ]
    for (let entry of recipeMap) { // —Ç–æ –∂–µ —Å–∞–º–æ–µ, —á—Ç–æ –∏ recipeMap.entries()
        console.log(entry); // –æ–≥—É—Ä–µ—Ü,500 (–∏ —Ç–∞–∫ –¥–∞–ª–µ–µ)
    }
}
/*
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ—Ä—è–¥–æ–∫ –≤—Å—Ç–∞–≤–∫–∏
–í –æ—Ç–ª–∏—á–∏–µ –æ—Ç –æ–±—ã—á–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ Object,
–≤ Map –ø–µ—Ä–µ–±–æ—Ä –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤
—Ç–æ–º –∂–µ –ø–æ—Ä—è–¥–∫–µ, –≤ –∫–∞–∫–æ–º –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤.
 */

/*
–≤–æ–æ–±—â–µ –æ—Ç–¥–µ–ª—å–Ω–æ —Å—Ç–æ–∏—Ç –≥–¥–µ-—Ç–æ –ø–æ–º–µ—Ç–∏—Ç—å —á—Ç–æ
—É js –æ—á–µ–Ω—å —É–¥–æ–±–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ –ø–æ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—é
–æ–±—ä–µ–∫—Ç–æ–≤ –≤ –º–∞–ø—ã –∏ –º–∞—Å—Å–∏–≤—ã

–ï—Å–ª–∏ —É –Ω–∞—Å —É–∂–µ –µ—Å—Ç—å –æ–±—ã—á–Ω—ã–π –æ–±—ä–µ–∫—Ç, –∏ –º—ã —Ö–æ—Ç–µ–ª–∏ –±—ã
—Å–æ–∑–¥–∞—Ç—å Map –∏–∑ –Ω–µ–≥–æ, —Ç–æ –ø–æ–º–æ–∂–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –º–µ—Ç–æ–¥
Object.entries(obj), –∫–æ—Ç–æ—Ä—ã–π –ø–æ–ª—É—á–∞–µ—Ç –æ–±—ä–µ–∫—Ç –∏
–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–∞—Å—Å–∏–≤
–ø–∞—Ä –∫–ª—é—á-–∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è –Ω–µ–≥–æ, –∫–∞–∫ —Ä–∞–∑ –≤ —ç—Ç–æ–º —Ñ–æ—Ä–º–∞—Ç–µ.
 */
{
    let obj = {
        name: "John",
        age: 30
    };

    let map = new Map(Object.entries(obj));

    console.log(map.get('name')); // John

}

/*
Object.fromEntries: Object –∏–∑ Map
–ú—ã —Ç–æ–ª—å–∫–æ —á—Ç–æ –≤–∏–¥–µ–ª–∏, –∫–∞–∫ —Å–æ–∑–¥–∞—Ç—å Map
–∏–∑ –æ–±—ã—á–Ω–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ –ø—Ä–∏ –ø–æ–º–æ—â–∏ Object.entries(obj).

–ï—Å—Ç—å –º–µ—Ç–æ–¥ Object.fromEntries, –∫–æ—Ç–æ—Ä—ã–π –¥–µ–ª–∞–µ—Ç
–ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω–æ–µ: –ø–æ–ª—É—á–∏–≤ –º–∞—Å—Å–∏–≤ –ø–∞—Ä –≤–∏–¥–∞ [–∫–ª—é—á,
–∑–Ω–∞—á–µ–Ω–∏–µ], –æ–Ω —Å–æ–∑–¥–∞—ë—Ç –∏–∑ –Ω–∏—Ö –æ–±—ä–µ–∫—Ç:
 */

{
    let prices = Object.fromEntries([
        ['banana', 1],
        ['orange', 2],
        ['meat', 4]
    ]);

// prices = { banana: 1, orange: 2, meat: 4 }

    console.log(prices.orange); // 2
}

/*
Object.fromEntries –æ–∂–∏–¥–∞–µ—Ç –ø–µ—Ä–µ–±–∏—Ä–∞–µ–º—ã–π –æ–±—ä–µ–∫—Ç –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∞—Ä–≥—É–º–µ–Ω—Ç–∞,
–Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –º–∞—Å—Å–∏–≤. –ê –ø–µ—Ä–µ–±–æ—Ä map –∫–∞–∫ —Ä–∞–∑ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç
–ø–∞—Ä—ã –∫–ª—é—á/–∑–Ω–∞—á–µ–Ω–∏–µ, —Ç–∞–∫ –∂–µ, –∫–∞–∫ –∏ map.entries(). –¢–∞–∫ —á—Ç–æ –≤ –∏—Ç–æ–≥–µ
—É –Ω–∞—Å –±—É–¥–µ—Ç –æ–±—ã—á–Ω—ã–π –æ–±—ä–µ–∫—Ç —Å —Ç–µ–º–∏ –∂–µ –∫–ª—é—á–∞–º–∏/–∑–Ω–∞—á–µ–Ω–∏—è–º–∏, —á—Ç–æ –∏ –≤ map.
 */


/*
Set
–û–±—ä–µ–∫—Ç Set ‚Äì —ç—Ç–æ –æ—Å–æ–±—ã–π –≤–∏–¥ –∫–æ–ª–ª–µ–∫—Ü–∏–∏: ¬´–º–Ω–æ–∂–µ—Å—Ç–≤–æ¬ª –∑–Ω–∞—á–µ–Ω–∏–π (–±–µ–∑ –∫–ª—é—á–µ–π),
–≥–¥–µ –∫–∞–∂–¥–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –º–æ–∂–µ—Ç –ø–æ—è–≤–ª—è—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑.

–ï–≥–æ –æ—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã —ç—Ç–æ:
new Set(iterable) ‚Äì —Å–æ–∑–¥–∞—ë—Ç Set, –∏ –µ—Å–ª–∏ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ –±—ã–ª –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω
–∏—Ç–µ—Ä–∏—Ä—É–µ–º—ã–π –æ–±—ä–µ–∫—Ç (–æ–±—ã—á–Ω–æ —ç—Ç–æ –º–∞—Å—Å–∏–≤), —Ç–æ –∫–æ–ø–∏—Ä—É–µ—Ç –µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –≤ –Ω–æ–≤—ã–π Set.
set.add(value) ‚Äì –¥–æ–±–∞–≤–ª—è–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ (–µ—Å–ª–∏ –æ–Ω–æ —É–∂–µ –µ—Å—Ç—å, —Ç–æ –Ω–∏—á–µ–≥–æ
–Ω–µ –¥–µ–ª–∞–µ—Ç), –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–æ—Ç –∂–µ –æ–±—ä–µ–∫—Ç set.
set.delete(value) ‚Äì —É–¥–∞–ª—è–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç true, –µ—Å–ª–∏ value –±—ã–ª–æ –≤
–º–Ω–æ–∂–µ—Å—Ç–≤–µ –Ω–∞ –º–æ–º–µ–Ω—Ç –≤—ã–∑–æ–≤–∞, –∏–Ω–∞—á–µ false.
set.has(value) ‚Äì –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç true, –µ—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ –º–Ω–æ–∂–µ—Å—Ç–≤–µ,
–∏–Ω–∞—á–µ false.
set.clear() ‚Äì —É–¥–∞–ª—è–µ—Ç –≤—Å–µ –∏–º–µ—é—â–∏–µ—Å—è –∑–Ω–∞—á–µ–Ω–∏—è.
set.size ‚Äì –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ –º–Ω–æ–∂–µ—Å—Ç–≤–µ.
 */

{
    console.log("////////////SET//////////////")
    let set = new Set();

    let john = { name: "John" };
    let pete = { name: "Pete" };
    let mary = { name: "Mary" };

// —Å—á–∏—Ç–∞–µ–º –≥–æ—Å—Ç–µ–π, –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–∏—Ö–æ–¥—è—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑
    set.add(john);
    set.add(pete);
    set.add(mary);
    set.add(john);
    set.add(mary);

// set —Ö—Ä–∞–Ω–∏—Ç —Ç–æ–ª—å–∫–æ 3 —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏—è
    console.log(set.size); // 3

    for (let user of set) {
        console.log((user.name)); // John (–ø–æ—Ç–æ–º Pete –∏ Mary)
    }
}


{
    let set = new Set(["–∞–ø–µ–ª—å—Å–∏–Ω", "—è–±–ª–æ–∫–æ", "–±–∞–Ω–∞–Ω"]);

    for (let value of set) console.log(value);

// —Ç–æ –∂–µ —Å–∞–º–æ–µ —Å forEach:
    set.forEach((value, valueAgain, set) => {
        console.log(value);
    });
}



{
    console.log("|WeakMap –∏ WeakSet|")
    let john = { name: "John" };

    let map = new Map();
    map.set(john, "...");

// –æ–±—ä–µ–∫—Ç john —Å–æ—Ö—Ä–∞–Ω—ë–Ω –≤–Ω—É—Ç—Ä–∏ –æ–±—ä–µ–∫—Ç–∞ `Map`,
    console.log(map.keys().next())

    john = null; // –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ–º —Å—Å—ã–ª–∫—É –Ω–∞ –æ–±—ä–µ–∫—Ç

// –æ–Ω –¥–æ—Å—Ç—É–ø–µ–Ω —á–µ—Ä–µ–∑ map.keys()
    console.log(map.get(john)) //undefined
    console.log(map.keys().next()) // –Ω–æ —Ç–∞–∫ –æ–±—ä–µ–∫—Ç –≤—Å—ë —Ä–∞–≤–Ω–æ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω


    /*
    WeakMap
    –ü–µ—Ä–≤–æ–µ –µ–≥–æ –æ—Ç–ª–∏—á–∏–µ –æ—Ç Map –≤ —Ç–æ–º, —á—Ç–æ
    –∫–ª—é—á–∏ –≤ WeakMap –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ–±—ä–µ–∫—Ç–∞–º–∏, –∞ –Ω–µ –ø—Ä–∏–º–∏—Ç–∏–≤–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏:
     */

    let weakMap = new WeakMap();

    let obj = {};

    weakMap.set(obj, "ok"); // —Ä–∞–±–æ—Ç–∞–µ—Ç (–æ–±—ä–µ–∫—Ç –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∫–ª—é—á–∞)

// –Ω–µ–ª—å–∑—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç—Ä–æ–∫—É –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∫–ª—é—á–∞
//     weakMap.set("test", "Whoops"); // –û—à–∏–±–∫–∞, –ø–æ—Ç–æ–º—É —á—Ç–æ "test" –Ω–µ –æ–±—ä–µ–∫—Ç

    console.log(weakMap);
    obj = null;
    // –æ–±—ä–µ–∫—Ç obj —É–¥–∞–ª—ë–Ω –∏–∑ –ø–∞–º—è—Ç–∏!
    // –≤ —Ü–µ–ª–æ–º –∏–Ω—Ç–µ—Ä–µ—Å–Ω–∞—è —à—Ç—É–∫–∞
    //–µ—Å–ª–∏ –Ω—É–∂–Ω–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–∞–º—è—Ç—å –Ω–∞–≤–µ—Ä–Ω–æ–µ

    /*
    –°—Ä–∞–≤–Ω–∏—Ç–µ —ç—Ç–æ –ø–æ–≤–µ–¥–µ–Ω–∏–µ —Å –ø–æ–≤–µ–¥–µ–Ω–∏–µ–º –æ–±—ã—á–Ω–æ–≥–æ Map, –ø—Ä–∏–º–µ—Ä –∫–æ—Ç–æ—Ä–æ–≥–æ –±—ã–ª –ø—Ä–∏–≤–µ–¥—ë–Ω —Ä–∞–Ω–µ–µ. –¢–µ–ø–µ—Ä—å john —Å—É—â–µ—Å—Ç–≤—É–µ—Ç —Ç–æ–ª—å–∫–æ –∫–∞–∫ –∫–ª—é—á –≤ WeakMap –∏ –º–æ–∂–µ—Ç –±—ã—Ç—å —É–¥–∞–ª—ë–Ω –æ—Ç—Ç—É–¥–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

    WeakMap –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–µ—Ä–µ–±–æ—Ä –∏ –º–µ—Ç–æ–¥—ã keys(), values(),
    entries(), —Ç–∞–∫ —á—Ç–æ –Ω–µ—Ç —Å–ø–æ—Å–æ–±–∞ –≤–∑—è—Ç—å –≤—Å–µ –∫–ª—é—á–∏ –∏–ª–∏ –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ –Ω–µ—ë.

–í WeakMap –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç —Ç–æ–ª—å–∫–æ —Å–ª–µ–¥—É—é—â–∏–µ –º–µ—Ç–æ–¥—ã:

weakMap.get(key)
weakMap.set(key, value)
weakMap.delete(key)
weakMap.has(key)
    –ö —á–µ–º—É —Ç–∞–∫–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è? –ò–∑-–∑–∞ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–µ–π —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏.
    –ï—Å–ª–∏ –æ–±—ä–µ–∫—Ç —Å—Ç–∞–Ω–µ—Ç –Ω–µ–¥–æ—Å—Ç–∏–∂–∏–º (–∫–∞–∫ –æ–±—ä–µ–∫—Ç john –≤ –ø—Ä–∏–º–µ—Ä–µ –≤—ã—à–µ), —Ç–æ –æ–Ω
    –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—ë–Ω —Å–±–æ—Ä—â–∏–∫–æ–º –º—É—Å–æ—Ä–∞. –ù–æ –Ω–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏,
    –≤ –∫–∞–∫–æ–π –º–æ–º–µ–Ω—Ç –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç —ç—Ç–∞ –æ—á–∏—Å—Ç–∫–∞.

     */

    /*
    –î–∞–≤–∞–π—Ç–µ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –æ–¥–∏–Ω –ø—Ä–∏–º–µ—Ä.

–ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —É –Ω–∞—Å –µ—Å—Ç—å –∫–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –≤–µ–¥—ë—Ç —É—á—ë—Ç –ø–æ—Å–µ—â–µ–Ω–∏–π –¥–ª—è
–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π. –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ Map: –æ–±—ä–µ–∫—Ç,
–ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, —è–≤–ª—è–µ—Ç—Å—è –∫–ª—é—á–æ–º, –∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
–≤–∏–∑–∏—Ç–æ–≤ ‚Äì –∑–Ω–∞—á–µ–Ω–∏–µ–º. –ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞—Å –ø–æ–∫–∏–¥–∞–µ—Ç
(–µ–≥–æ –æ–±—ä–µ–∫—Ç —É–¥–∞–ª—è–µ—Ç—Å—è —Å–±–æ—Ä—â–∏–∫–æ–º –º—É—Å–æ—Ä–∞), —Ç–æ –±–æ–ª—å—à–µ –Ω–µ—Ç —Å–º—ã—Å–ª–∞
—Ö—Ä–∞–Ω–∏—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π —Å—á—ë—Ç—á–∏–∫ –ø–æ—Å–µ—â–µ–Ω–∏–π.
–í–æ—Ç –ø—Ä–∏–º–µ—Ä —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Å—á—ë—Ç—á–∏–∫–∞ –ø–æ—Å–µ—â–µ–Ω–∏–π —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Map:
*/

// üìÅ visitsCount.js
    let visitsCountMap = new Map(); // map: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å => —á–∏—Å–ª–æ –≤–∏–∑–∏—Ç–æ–≤

// —É–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Å—á—ë—Ç—á–∏–∫
    function countUser(user) {
        let count = visitsCountMap.get(user) || 0;
        visitsCountMap.set(user, count + 1);
    }

// üìÅ main.js
    let john2= { name: "John" };

    countUser(john2); //–≤–µ–¥—ë–º –ø–æ–¥—Å—á—ë—Ç –ø–æ—Å–µ—â–µ–Ω–∏–π

// –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–∫–∏–Ω—É–ª –Ω–∞—Å
    john = null;

    /*
    –ù–∞–º –Ω—É–∂–Ω–æ –æ—á–∏—â–∞—Ç—å visitsCountMap –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –æ–±—ä–µ–∫—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∏–Ω–∞—á–µ
    –∫–æ–ª–ª–µ–∫—Ü–∏—è –±—É–¥–µ—Ç –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ —Ä–∞—Å—Ç–∏. –ü–æ–¥–æ–±–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å
    –Ω–µ—É–¥–æ–±–Ω–∞ –≤ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–∏ —Å–ª–æ–∂–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
     */

// üìÅ visitsCount.js
    let visitsCountMap2 = new WeakMap(); // map: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å => —á–∏—Å–ª–æ –≤–∏–∑–∏—Ç–æ–≤

// —É–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Å—á—ë—Ç—á–∏–∫
    function countUser2(user) {
        let count = visitsCountMap2.get(user) || 0;
        visitsCountMap.set(user, count + 1);
    }


}

//–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –¥–ª—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è
/*
–î—Ä—É–≥–∞—è —á–∞—Å—Ç–∞—è —Å—Ñ–µ—Ä–∞ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è ‚Äì —ç—Ç–æ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ, –∫–æ–≥–¥–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç
–≤—ã–∑–æ–≤–∞ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–æ–ª–∂–µ–Ω –≥–¥–µ-—Ç–æ –∑–∞–ø–æ–º–∏–Ω–∞—Ç—å—Å—è (¬´–∫–µ—à–∏—Ä–æ–≤–∞—Ç—å—Å—è¬ª) –¥–ª—è —Ç–æ–≥–æ,
—á—Ç–æ–±—ã –¥–∞–ª—å–Ω–µ–π—à–∏–µ –µ—ë –≤—ã–∑–æ–≤—ã –Ω–∞ —Ç–æ–º
–∂–µ –æ–±—ä–µ–∫—Ç–µ –º–æ–≥–ª–∏ –ø—Ä–æ—Å—Ç–æ –±—Ä–∞—Ç—å —É–∂–µ –≥–æ—Ç–æ–≤—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç, –ø–æ–≤—Ç–æ—Ä–Ω–æ –∏—Å–ø–æ–ª—å–∑—É—è –µ–≥–æ.
 */

{
    // üìÅ cache.js
    let cache = new Map();

// –≤—ã—á–∏—Å–ª—è–µ–º –∏ –∑–∞–ø–æ–º–∏–Ω–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
    function process(obj) {
        if (!cache.has(obj)) {
            let result = /* —Ç—É—Ç –∫–∞–∫–∏–µ-—Ç–æ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –¥–ª—è –æ–±—ä–µ–∫—Ç–∞ */ obj;

            cache.set(obj, result);
        }

        return cache.get(obj);
    }

    let obj = {/* –¥–æ–ø—É—Å—Ç–∏–º, —É –Ω–∞—Å –µ—Å—Ç—å –∫–∞–∫–æ–π-—Ç–æ –æ–±—ä–µ–∫—Ç */};

    let result1 = process(obj); // –≤—ã—á–∏—Å–ª–µ–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç

// ...–ø–æ–∑–∂–µ, –∏–∑ –¥—Ä—É–≥–æ–≥–æ –º–µ—Å—Ç–∞ –≤ –∫–æ–¥–µ...
    let result2 = process(obj); // —Ä–∞–Ω–µ–µ –≤—ã—á–∏—Å–ª–µ–Ω–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤–∑—è—Ç –∏–∑ –∫–µ—à–∞

// ...–ø–æ–∑–∂–µ, –∫–æ–≥–¥–∞ –æ–±—ä–µ–∫—Ç –±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–µ–Ω:
    obj = null;

    console.log(cache.size); // 1 (–£–ø—Å! –û–±—ä–µ–∫—Ç –≤—Å—ë –µ—â—ë –≤ –∫–µ—à–µ, –∑–∞–Ω–∏–º–∞–µ—Ç –ø–∞–º—è—Ç—å!)

    /*
    –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–æ–º —è–≤–ª—è–µ—Ç—Å—è —Ç–æ,
    —á—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—Ä—É—á–Ω—É—é –æ—á–∏—â–∞—Ç—å cache –æ—Ç —Å—Ç–∞–≤—à–∏—Ö –Ω–µ–Ω—É–∂–Ω—ã–º–∏ –æ–±—ä–µ–∫—Ç–æ–≤.
     */

}

{
    // üìÅ cache.js
    let cache = new WeakMap();

// –≤—ã—á–∏—Å–ª—è–µ–º –∏ –∑–∞–ø–æ–º–∏–Ω–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
    function process(obj) {
        if (!cache.has(obj)) {
            let result = /* –≤—ã—á–∏—Å–ª—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –¥–ª—è –æ–±—ä–µ–∫—Ç–∞ */ obj;

            cache.set(obj, result);
        }

        return cache.get(obj);
    }

// üìÅ main.js
    let obj = {/* –∫–∞–∫–æ–π-—Ç–æ –æ–±—ä–µ–∫—Ç */};

    let result1 = process(obj);
    let result2 = process(obj);

// ...–ø–æ–∑–∂–µ, –∫–æ–≥–¥–∞ –æ–±—ä–µ–∫—Ç –±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–µ–Ω:
    obj = null;
}

{
    /*
    –ö–æ–ª–ª–µ–∫—Ü–∏—è WeakSet –≤–µ–¥—ë—Ç —Å–µ–±—è –ø–æ—Ö–æ–∂–µ:

–û–Ω–∞ –∞–Ω–∞–ª–æ–≥–∏—á–Ω–∞ Set, –Ω–æ –º—ã –º–æ–∂–µ–º –¥–æ–±–∞–≤–ª—è—Ç—å –≤ WeakSet —Ç–æ–ª—å–∫–æ –æ–±—ä–µ–∫—Ç—ã
(–Ω–µ –ø—Ä–∏–º–∏—Ç–∏–≤–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è).
–û–±—ä–µ–∫—Ç –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ –º–Ω–æ–∂–µ—Å—Ç–≤–µ —Ç–æ–ª—å–∫–æ –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –¥–æ—Å—Ç—É–ø–µ–Ω –≥–¥–µ-—Ç–æ –µ—â—ë.
–ö–∞–∫ –∏ Set, –æ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç add, has –∏ delete, –Ω–æ –Ω–µ size, keys() –∏
–Ω–µ —è–≤–ª—è–µ—Ç—Å—è –ø–µ—Ä–µ–±–∏—Ä–∞–µ–º–æ–π.
–ë—É–¥—É—á–∏ ¬´—Å–ª–∞–±–æ–π¬ª –≤–µ—Ä—Å–∏–µ–π –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö, –æ–Ω–∞ —Ç–æ–∂–µ —Å–ª—É–∂–∏—Ç –≤ –∫–∞—á–µ—Å—Ç–≤–µ
 –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞. –ù–æ –Ω–µ –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö, –∞ —Å–∫–æ—Ä–µ–µ –¥–ª—è
 –∑–Ω–∞—á–µ–Ω–∏–π —Ç–∏–ø–∞ ¬´–¥–∞/–Ω–µ—Ç¬ª. –ü—Ä–∏—Å—É—Ç—Å—Ç–≤–∏–µ –≤–æ –º–Ω–æ–∂–µ—Å—Ç–≤–µ WeakSet –º–æ–∂–µ—Ç —á—Ç–æ-—Ç–æ
 —Å–∫–∞–∑–∞—Ç—å –Ω–∞–º –æ–± –æ–±—ä–µ–∫—Ç–µ.

–ù–∞–ø—Ä–∏–º–µ—Ä, –º—ã –º–æ–∂–µ–º –¥–æ–±–∞–≤–ª—è—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ WeakSet –¥–ª—è —É—á—ë—Ç–∞ —Ç–µ—Ö, –∫—Ç–æ
–ø–æ—Å–µ—â–∞–ª –Ω–∞—à —Å–∞–π—Ç:


     */
}






